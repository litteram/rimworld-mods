<?xml version="1.0" encoding="utf-8"?>
<Patch>
  <!--
      VPE Ranger
  -->
  <Operation Class="PatchOperationAdd" MayRequire="aranmaho.rangerclass">
    <xpath>/Defs/VanillaPsycastExpanded.PsycasterpathDef[defName="Makai_Ranger"]</xpath>
    <value>
      <lockedReason>Lack of psycaster gene</lockedReason>
      <requiredGene>
        <GeneDef>Gene_Ranger</GeneDef>
      </requiredGene>
    </value>
  </Operation>
  <!--
      Stunskip
  -->
  <Operation Class="PatchOperationReplace" MayRequire="rabbit.stuncastervpe3">
    <xpath>/Defs/VanillaPsycastExpanded.PsycasterpathDef[defName="VPEStunskipPath"]</xpath>
    <value>
      <lockedReason>Lack of psycaster gene</lockedReason>
      <requiredGene>
        <GeneDef>Gene_Stunskip</GeneDef>
      </requiredGene>
    </value>
  </Operation>
  <!--
      Puppeteer
  -->
  <Operation Class="PatchOperationSequence" MayRequire="VanillaExpanded.VPE.Puppeteer">
    <operations>
      <li Class="PatchOperationReplace">
        <xpath>/Defs/VanillaPsycastExpanded.PsycasterpathDef[defName="VPEP_Puppeteer"]/lockedReason</xpath>
        <value>
          <lockedReason>Lack of psycaster gene</lockedReason>
        </value>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/VanillaPsycastExpanded.PsycasterpathDef[defName="VPEP_Puppeteer"]</xpath>
        <value>
          <requiredGene>
            <GeneDef>Gene_Puppeteer</GeneDef>
          </requiredGene>
        </value>
      </li>
      <li Class="PatchOperationRemove">
        <xpath>/Defs/VanillaPsycastExpanded.PsycasterpathDef[defName="VPEP_Puppeteer"]/requiredBackstoriesAny</xpath>
      </li>
    </operations>
  </Operation>
</Patch>
